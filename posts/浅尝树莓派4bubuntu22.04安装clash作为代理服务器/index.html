<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>浅尝树莓派4B(Ubuntu22.04)安装Clash作为代理服务器 - dingyufan's blog</title><meta name=author content>
<meta name=description content="this is dingyufan's blog"><meta name=keywords content='Raspberry Pi,Ubuntu,Clash'><meta itemprop=name content="浅尝树莓派4B(Ubuntu22.04)安装Clash作为代理服务器"><meta itemprop=description content="this is dingyufan's blog"><meta itemprop=datePublished content="2023-09-09T00:00:00+00:00"><meta itemprop=dateModified content="2024-11-18T01:44:23+00:00"><meta itemprop=wordCount content="3019"><meta itemprop=keywords content="Raspberry Pi,Ubuntu,Clash"><meta property="og:url" content="https://dingyufan.github.io/posts/%E6%B5%85%E5%B0%9D%E6%A0%91%E8%8E%93%E6%B4%BE4bubuntu22.04%E5%AE%89%E8%A3%85clash%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8/"><meta property="og:site_name" content="dingyufan's blog"><meta property="og:title" content="浅尝树莓派4B(Ubuntu22.04)安装Clash作为代理服务器"><meta property="og:description" content="this is dingyufan's blog"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-09T00:00:00+00:00"><meta property="article:modified_time" content="2024-11-18T01:44:23+00:00"><meta property="article:tag" content="Raspberry Pi"><meta property="article:tag" content="Ubuntu"><meta property="article:tag" content="Clash"><meta name=twitter:card content="summary"><meta name=twitter:title content="浅尝树莓派4B(Ubuntu22.04)安装Clash作为代理服务器"><meta name=twitter:description content="this is dingyufan's blog"><meta name=application-name content="dingyufan's blog"><meta name=apple-mobile-web-app-title content="dingyufan's blog"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical type=text/html href=https://dingyufan.github.io/posts/%E6%B5%85%E5%B0%9D%E6%A0%91%E8%8E%93%E6%B4%BE4bubuntu22.04%E5%AE%89%E8%A3%85clash%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8/ title="浅尝树莓派4B(Ubuntu22.04)安装Clash作为代理服务器 - dingyufan's blog"><link rel=prev type=text/html href=https://dingyufan.github.io/posts/dubbo-stack-overflow-due-to-jdk8-instant/ title=JDK8日期时间API导致Dubbo调用StackOverflow错误><link rel=alternate type=text/markdown href=https://dingyufan.github.io/posts/%E6%B5%85%E5%B0%9D%E6%A0%91%E8%8E%93%E6%B4%BE4bubuntu22.04%E5%AE%89%E8%A3%85clash%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8/index.md title="浅尝树莓派4B(Ubuntu22.04)安装Clash作为代理服务器 - dingyufan's blog"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"浅尝树莓派4B(Ubuntu22.04)安装Clash作为代理服务器","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/dingyufan.github.io\/posts\/%E6%B5%85%E5%B0%9D%E6%A0%91%E8%8E%93%E6%B4%BE4bubuntu22.04%E5%AE%89%E8%A3%85clash%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8\/"},"genre":"posts","keywords":"Raspberry Pi, Ubuntu, Clash","wordcount":3019,"url":"https:\/\/dingyufan.github.io\/posts\/%E6%B5%85%E5%B0%9D%E6%A0%91%E8%8E%93%E6%B4%BE4bubuntu22.04%E5%AE%89%E8%A3%85clash%E4%BD%9C%E4%B8%BA%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8\/","datePublished":"2023-09-09T00:00:00+00:00","dateModified":"2024-11-18T01:44:23+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"作者"},"description":""}</script><script src=/js/head/color-scheme.min.js></script></head><body data-header-desktop=sticky data-header-mobile=auto><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="dingyufan's blog"><span class=header-title-text>dingyufan's blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="dingyufan's blog"><span class=header-title-text>dingyufan's blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><main class=container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label=合集></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>浅尝树莓派4B(Ubuntu22.04)安装Clash作为代理服务器</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Anonymous</span></span><span class=post-included-in>&nbsp;收录于 <a href=/categories/tech/ class=post-category title="分类 - Tech"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Tech</a></span></div><div class=post-meta-line><span title="发布于 2023-09-09 00:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=2023-09-09>2023-09-09</time></span>&nbsp;<span title="更新于 2024-11-18 01:44:23"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden=true></i><time datetime=2024-11-18>2024-11-18</time></span>&nbsp;<span title="3019 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 3100 字</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#0-前言>0 前言</a></li><li><a href=#1-安装-ubuntu2204>1 安装 Ubuntu22.04</a><ul><li><a href=#11-烧录操作系统>1.1 烧录操作系统</a></li><li><a href=#12-ubuntu软件源修改>1.2 Ubuntu软件源修改</a></li><li><a href=#13-固定网络ip>1.3 固定网络IP</a></li><li><a href=#14-安装-openssh-server>1.4 安装 openssh-server</a></li></ul></li><li><a href=#2-clash>2 Clash</a><ul><li><a href=#21-clash-for-windows>2.1 Clash for Windows</a></li><li><a href=#22-clash无图形界面>2.2 Clash(无图形界面)</a></li><li><a href=#23-使用方式>2.3 使用方式</a><ul><li><a href=#231-windows-10-设备>2.3.1 Windows 10 设备</a></li><li><a href=#232-手机ipad等无线设备>2.3.2 手机、iPad等无线设备</a></li><li><a href=#233-ubuntulinux>2.3.3 Ubuntu/Linux</a></li><li><a href=#234-按需配置>2.3.4 按需配置</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=0-前言 class=heading-element><span>0 前言</span>
<a href=#0-%e5%89%8d%e8%a8%80 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>树莓派（<a href=https://www.raspberrypi.com/ target=_blank rel="external nofollow noopener noreferrer">Raspberry Pi</a>）是一种基于ARM架构的单板计算机，仅有银行卡大小，本意是提供一种低成本的计算机学习硬件。但前几年由于各种原因，价格一路高歌猛进，让人望而却步。最近逛淘宝发现，树莓派价格差不多回归了正常架构，于是果断下手买一个尝尝。</p><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309091517163.jpg alt=1694243814807的副本 style=zoom:50%><h2 id=1-安装-ubuntu2204 class=heading-element><span>1 安装 Ubuntu22.04</span>
<a href=#1-%e5%ae%89%e8%a3%85-ubuntu2204 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>到手的是 树莓派4B 4G内存版，因为内存足够，准备安装带GUI界面的 Ubuntu Desktop 22.04 。</p><h3 id=11-烧录操作系统 class=heading-element><span>1.1 烧录操作系统</span>
<a href=#11-%e7%83%a7%e5%bd%95%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>树莓派的存储是在一张SD卡上，所以需要通过 <a href=https://www.raspberrypi.com/software/ target=_blank rel="external nofollow noopener noreferrer">Raspberry Pi Imager</a> 将操作系统烧录到SD卡中。</p><p>不需要提前下载镜像，直接可以在工具中选择系统，然后选中目标SD卡，点击烧录。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>&gt; Other general-purpose OS
</span></span><span class=line><span class=cl>  &gt; Ubuntu
</span></span><span class=line><span class=cl>    &gt; Ubuntu Desktop 22.04.3 LTS (64-bit)</span></span></code></pre></td></tr></table></div></div><div align=center><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309091548861.png alt="截屏2023-09-09 15.48.11" style=zoom:50%></div><p>烧录完成后，将SD卡插入树莓派，通电启动即可。系统安装后，即可通过 micro HMDI 连接到显示设备，并使用键盘、鼠标进行操作。首次启动会引导设置语言时区、用户名主机名等信息，不在此赘述。</p><h3 id=12-ubuntu软件源修改 class=heading-element><span>1.2 Ubuntu软件源修改</span>
<a href=#12-ubuntu%e8%bd%af%e4%bb%b6%e6%ba%90%e4%bf%ae%e6%94%b9 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>树莓派切换镜像源的方式和一般Ubuntu设备并无不同，唯一需要注意的是 <strong>要使用 ubuntu-ports 镜像</strong>，这里面才有arm64的源。</p><p>我们使用<a href=https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu-ports/ target=_blank rel="external nofollow noopener noreferrer">清华镜像站</a>，页面比较友好，可以直接在页面切换选项并产生配置内容。</p><div align=center><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309091610222.png style=zoom:50%></div><p>备份原 <code>sources.list</code>，将清华源信息覆写到 <code>sources.list</code>，执行 <code>sudo apt update </code>更新软件包信息。</p><h3 id=13-固定网络ip class=heading-element><span>1.3 固定网络IP</span>
<a href=#13-%e5%9b%ba%e5%ae%9a%e7%bd%91%e7%bb%9cip class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>为了方便ssh登录，以及作为网络代理服务器，需要设置一个固定的IP地址。</p><p>编辑netplan配置文件 <code>/etc/netplan/01-network-manager-all.yaml</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>renderer</span><span class=p>:</span><span class=w> </span><span class=l>NetworkManager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 无线网络配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>wifis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># 无线网卡 wlan0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>wlan0</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 关闭dhcp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dhcp4</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 固定IP， /24 用来表示掩码信息</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>addresses</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>192.168.31.250</span><span class=l>/24] </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>optional</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 配置项 gateway4 在新版本中已弃用，通过routes配置网关</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>routes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>via</span><span class=p>:</span><span class=w> </span><span class=m>192.168.31.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># DNS服务</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>nameservers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>addresses</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>114.114.114.114</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 配置WiFi信息</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>access-points</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=s2>&#34;WiFi名称&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;WiFi密码&#39;</span></span></span></code></pre></td></tr></table></div></div><p>配置修改完成后，使用 <code>sudo netplan try</code> 测试网络配置，无异常即可使用 <code>sudo netplan apply</code> 应用配置。</p><h3 id=14-安装-openssh-server class=heading-element><span>1.4 安装 openssh-server</span>
<a href=#14-%e5%ae%89%e8%a3%85-openssh-server class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>配置完成后，发现无法ssh访问，发现默认没有安装 openssh-server，通过apt安装。安装后即可远程ssh访问。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt install openssh-server</span></span></code></pre></td></tr></table></div></div><h2 id=2-clash class=heading-element><span>2 Clash</span>
<a href=#2-clash class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p><a href=https://github.com/Dreamacro/clash target=_blank rel="external nofollow noopener noreferrer">Clash</a> 是一个基于规则的代理工具，主要的用途不多说了，如果你知道这个软件，就说明你大概率有这个需求。这个安装方式也不限于树莓派设备，只要是运行Linux系统的设备，都可以</p><p>这次之所以选择带GUI的Ubuntu，很大一部分原因就是想要通过图形化界面，比较方便的配置Clash。</p><h3 id=21-clash-for-windows class=heading-element><span>2.1 Clash for Windows</span>
<a href=#21-clash-for-windows class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><a href=https://github.com/Fndroid/clash_for_windows_pkg/releases target=_blank rel="external nofollow noopener noreferrer">Clash for Windows</a> 是比较好用的一个 Clash GUI 客户端。</p><p><em><strong><font color=red>但是！它这个名字太具有迷惑性了！</font></strong></em></p><p><em><strong><font color=red>它其实 支持 Windows系统！也支持 Linux！还支持 macOS ！</font></strong></em></p><p>从GitHub release页面下载，<code>Clash.for.Windows-0.20.34-arm64-linux.tar.gz</code>，从它提供的各种安装包也能看出支持多平台</p><div align=center><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309091901250.png alt="截屏2023-09-09 18.58.02" style=zoom:55%></div><p>下载后解压，运行 <code>cfw</code>，即可出现GUI界面，然后开始进行配置。</p><div align=center><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309091910073.png alt=clashforwin-0 style=zoom:100%></div><ol><li>在左侧 <strong>General 菜单</strong>中，<strong>打开 Allow LAN开关，允许局域网连接</strong>。这样不止为本机提供网络代理，也能为局域网其他设备提供代理。</li><li>在左侧 <strong>Profiles 菜单</strong>中，<strong>将机场提供的订阅地址填入输入框，下载得到代理规则</strong>。config.yaml为默认配置，sub为订阅到的规则。</li></ol><div align=center><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309091928725.png alt=202309091916624 style=zoom:100%></div><p>到这为止，Clash for Windows就已经准备完毕了，随时可以使用了。</p><h3 id=22-clash无图形界面 class=heading-element><span>2.2 Clash(无图形界面)</span>
<a href=#22-clash%e6%97%a0%e5%9b%be%e5%bd%a2%e7%95%8c%e9%9d%a2 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>如是是无图形界面的情况，可以通过命令安装Clash。</p><p>下载Clash，注意版本，这里以树莓派使用的ARM版本为例</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir ~/clash <span class=o>&amp;&amp;</span> <span class=nb>cd</span> ~/clash
</span></span><span class=line><span class=cl>wget https://github.com/Dreamacro/clash/releases/download/v1.18.0/clash-linux-armv7-v1.18.0.gz</span></span></code></pre></td></tr></table></div></div><p>解压后重命名</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>gunzip clash-linux-armv7-v1.18.0.gz
</span></span><span class=line><span class=cl>mv clash-linux-armv7-v1.18.0 clash</span></span></code></pre></td></tr></table></div></div><p>移动clash到指定位置，并赋予执行权限</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo cp clash /usr/local/bin
</span></span><span class=line><span class=cl>sudo chmod +x /usr/local/bin/clash</span></span></code></pre></td></tr></table></div></div><p>初始化执行，自动生成config.yaml 和 Country.mmdb</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo /usr/local/bin/clash -d /etc/clash/
</span></span><span class=line><span class=cl><span class=c1># 输出</span>
</span></span><span class=line><span class=cl><span class=c1># INFO[0000] Can&#39;t find config, create a initial config file </span>
</span></span><span class=line><span class=cl><span class=c1># INFO[0000] Can&#39;t find MMDB, start download              </span>
</span></span><span class=line><span class=cl><span class=c1># INFO[0003] inbound mixed://127.0.0.1:7890 create success. </span></span></span></code></pre></td></tr></table></div></div><p>ctrl+c中断执行，<strong>修改config.yaml</strong>。这个就替换成你机场Clash订阅地址返回的yaml代理站点内容。</p><p><strong><font color=red>需要注意的是，在config.yaml中有几个配置，可能需要自己修改一下，因为机场提供的值可能不是你想要的</font></strong></p><ol><li><p><strong>关于端口</strong></p><p>代理端口分为 <code>http代理端口（port）</code>、<code>socks代理端口（socks-port）</code> 和 <code>混合代理端口 （mixed-port）</code>。这里建议直接将<code>混合代理端口 （mixed-port）</code>设置为7890，其他两项设为0。这样不管是http、socks都是用同一个7890端口，更加方便</p></li><li><p><strong>关于外部控制</strong></p><p>Clash是支持通过 RESTful 接口来对Clash进行功能配置的，目前市面上的GUI客户端配置管理也是基于这个方式。</p><p>config.yaml中有一项配置 <code>external-controller</code>，修改为 <code>0.0.0.0:9090</code> 这样方便我从局域网其他设备对其进行控制。</p><p>还有一项配置 <code>secret</code> 主要用于 RESTful 控制接口的身份认证密码。如果是局域网不对外的话，可暂时不配。</p></li><li><p><strong>clash.razord.top</strong></p><p>对于没有GUI的Clash，可以在其他设备上通过这个网站，获得一个控制的Dashboard。</p><p>网站打开时会让填写 Host、端口、秘钥，填写后就可以借助这个网页，对无图形界面设备上安装的Clash进行配置。具体原理的话就是页面发起配置对应功能的http请求。</p></li></ol><p>代理配置完后，创建systemd 配置文件 <code>/etc/systemd/system/clash.service</code>，让我们的Clash能够开机自启。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Unit]</span>
</span></span><span class=line><span class=cl><span class=na>Description</span><span class=o>=</span><span class=s>Clash 守护进程, Go 语言实现的基于规则的代理.</span>
</span></span><span class=line><span class=cl><span class=na>After</span><span class=o>=</span><span class=s>network-online.target</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=na>Type</span><span class=o>=</span><span class=s>simple</span>
</span></span><span class=line><span class=cl><span class=na>Restart</span><span class=o>=</span><span class=s>always</span>
</span></span><span class=line><span class=cl><span class=na>ExecStart</span><span class=o>=</span><span class=s>/usr/local/bin/clash -d /etc/clash</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Install]</span>
</span></span><span class=line><span class=cl><span class=na>WantedBy</span><span class=o>=</span><span class=s>multi-user.target</span></span></span></code></pre></td></tr></table></div></div><p>重新加载 systemd，设置开机启动 和 立即启动</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo systemctl daemon-reload
</span></span><span class=line><span class=cl><span class=c1># 设置系统启动时启动clash</span>
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> clash
</span></span><span class=line><span class=cl><span class=c1># 立即启动clash</span>
</span></span><span class=line><span class=cl>sudo systemctl start clash
</span></span><span class=line><span class=cl><span class=c1># 查看clash运行状态</span>
</span></span><span class=line><span class=cl>sudo systemctl status clash</span></span></code></pre></td></tr></table></div></div><p>到这为止，Clash就已经准备完毕了，随时可以使用了。</p><h3 id=23-使用方式 class=heading-element><span>2.3 使用方式</span>
<a href=#23-%e4%bd%bf%e7%94%a8%e6%96%b9%e5%bc%8f class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><blockquote><p>如果你使用的设备安装了SSR、V2ray或者Clash，那你可以直接在软件界面上操作，通过界面提供的功能来开启系统代理。</p></blockquote><p>这里主要是介绍一下没有安装代理软件的设备，如何借助局域网内其他已安装的代理设备(即代理服务器)，实现网络代理功能。</p><h4 id=231-windows-10-设备 class=heading-element><span>2.3.1 Windows 10 设备</span>
<a href=#231-windows-10-%e8%ae%be%e5%a4%87 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>在 Window 10 设置 > 网络和Internet > 代理 中，打开【使用代理服务器】开关，地址填树莓派IP地址，端口为Clash使用的7890端口。</p><p>也可以设置对 本地地址(localhost)、常见的局域网网段(192.168.x.x) 不使用代理服务器。</p><div align=center><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309101055135.png alt=VD7~4$~CB7W10@9NIW6HVFH style=zoom:70%></div><h4 id=232-手机ipad等无线设备 class=heading-element><span>2.3.2 手机、iPad等无线设备</span>
<a href=#232-%e6%89%8b%e6%9c%baipad%e7%ad%89%e6%97%a0%e7%ba%bf%e8%ae%be%e5%a4%87 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>进入 无线局域网设置(WLAN设置)，点击已连接的无线网络，将网络详情页面拉到底，有HTTP代理设置，填入树莓派IP地址，Clash的7890端口保存即可。</p><div align=center><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309101116742.jpg alt=MTXX_PT20230910_111545372 style=zoom:15%></div><h4 id=233-ubuntulinux class=heading-element><span>2.3.3 Ubuntu/Linux</span>
<a href=#233-ubuntulinux class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>如果是带有GUI界面的操作系统，直接在界面上配置，以Ubuntu为例，在 Settings > Network > Network Proxy 中，将代理配置中填入树莓派IP地址和Clash的7890端口保存即可</p><div align=center><img src=https://dingyufan-github-io.oss-cn-hangzhou.aliyuncs.com/blog/202309101147300.png alt="截屏2023-09-10 11.47.19" style=zoom:60%></div><p>如果是没有界面的Linux系统，可以通过设置环境变量的方式设置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>export</span> <span class=nv>https_proxy</span><span class=o>=</span>http://192.168.31.250:7890 
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>http_proxy</span><span class=o>=</span>http://192.168.31.250:7890
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>all_proxy</span><span class=o>=</span>socks5://192.168.31.250:7890</span></span></code></pre></td></tr></table></div></div><h4 id=234-按需配置 class=heading-element><span>2.3.4 按需配置</span>
<a href=#234-%e6%8c%89%e9%9c%80%e9%85%8d%e7%bd%ae class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>总的来说，我个人并不喜欢为系统配置全局网络代理，我更喜欢<strong>给有需要的程序配置网络代理</strong>。举个几个例子：</p><p><strong>容器运行时containerd</strong></p><p>使用containerd时，有些镜像国内无法拉取，而且国内没有厂商同步这些镜像，这就可以为containerd配置代理服务器，来帮助拉取这些镜像。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo mkdir -p /etc/systemd/system/containerd.service.d/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt; EOF | sudo tee -a /etc/systemd/system/containerd.service.d/http-proxy.conf
</span></span></span><span class=line><span class=cl><span class=s>[Service]
</span></span></span><span class=line><span class=cl><span class=s>Environment=&#34;HTTP_PROXY=192.168.31.250:7890&#34;
</span></span></span><span class=line><span class=cl><span class=s>Environment=&#34;HTTPS_PROXY=192.168.31.250:7890&#34;
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo systemctl restart containerd</span></span></code></pre></td></tr></table></div></div><p><strong>proxychains4</strong></p><p>这是一个很简单、好用的代理工工具。你只需要通过apt安装</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt install proxychains4</span></span></code></pre></td></tr></table></div></div><p>安装后修改配置文件 <code>/etc/proxychains.config</code>，将文件最后的代理地址改为代理服务器的地址，比如 <code>socks5 192.168.31.250 7890</code>即可。</p><p>使用方法的话，只需要在原本命令前添加 proxychains4 即可</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>proxychains4 wget xxx
</span></span><span class=line><span class=cl>proxychains4 curl xxx
</span></span><span class=line><span class=cl>proxychains4 git clone xxx</span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2024-11-18 01:44:23">更新于 2024-11-18&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/raspberry-pi/ class=post-tag title="标签 - Raspberry Pi">Raspberry Pi</a><a href=/tags/ubuntu/ class=post-tag title="标签 - Ubuntu">Ubuntu</a><a href=/tags/clash/ class=post-tag title="标签 - Clash">Clash</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/dubbo-stack-overflow-due-to-jdk8-instant/ class=post-nav-item rel=prev title=JDK8日期时间API导致Dubbo调用StackOverflow错误><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>JDK8日期时间API导致Dubbo调用StackOverflow错误</a></div></div><div id=comments><div id=giscus class=comment><script src=https://giscus.app/client.js data-repo=dingyufan/dingyufan.github.io data-repo-id=R_kgDOKAsu4A data-category=Announcements data-category-id=DIC_kwDOKAsu4M4CYL_F data-mapping=pathname data-strict=0 data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-lang=zh-CN crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article><aside class=toc id=toc-auto aria-label=目录><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.138.0"><img class=hugo-icon src=/images/hugo.min.svg alt="Hugo logo"> Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.3.15"><img class=fixit-icon src=/images/fixit.min.svg alt="FixIt logo"> FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2022 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=/></a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label=查看评论><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><div id=mask></div><noscript><div class=noscript-warning>该网站在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=preload href=/lib/katex/katex.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/katex/katex.min.css></noscript><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:1024},comment:{enable:!0,expired:!1,giscus:{darkTheme:"dark",lightTheme:"light",origin:"https://giscus.app"}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},version:"v0.3.15"}</script><script src=/js/theme.min.js defer></script></body></html>